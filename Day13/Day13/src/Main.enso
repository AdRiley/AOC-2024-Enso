from Standard.Base import all
from Standard.Table import all
from Standard.Database import all
from Standard.AWS import all
from Standard.Google_Api import all
from Standard.Snowflake import all
import Standard.Examples
import Standard.Visualization

main =
    file1 = Data.read '/Users/adriley/Code/AOC-2024-Enso/Day13/input.txt'
    any1 = file1.parse_to_table (regex "Button A: X\+(?<A_X>\d+), Y\+(?<A_Y>\d+)\nButton B: X\+(?<B_X>\d+), Y\+(?<B_Y>\d+)\nPrize: X=(?<Prize_X>\d+), Y=(?<Prize_Y>\d+)\n")
    node1 = 0.up_to 100
    column1 = node1.to_column "A_Presses"
    column2 = node1.to_column "B_Presses"
    table3 = any1.add_row_number "Machine"
    ## Part 1
    table1 = table3.cross_join column1 Nothing
    table2 = table1.cross_join column2 Nothing
    any2 = table2.set (expr '[A_X]*[A_Presses] + [B_X]*[B_Presses]') "X"
    any3 = any2.set (expr '[A_Y]*[A_Presses] + [B_Y]*[B_Presses]') "Y"
    ## Get all of the winning machine and button press combinations
    any4 = any3.filter (expr '[X]=[Prize_X] && [Y]=[Prize_Y]') ..Is_True
    ## Calculate the cost of the wins
    any5 = any4.set (expr '[A_Presses]*3+[B_Presses]') "Cost"
    ## and take the cheapest win for each machine
    any6 = any5.aggregate ['Machine'] [..Minimum 'Cost']
    ## Calculate the total cost of winning on all the machines
    any7 = any6.aggregate columns=[..Sum 'Minimum Cost']
    ## Part 2 (Could use the same method for Part 1)
    any14 = table3.set (expr '[Prize_X]+10000000000000') "Prize_X"
    any15 = any14.set (expr '[Prize_Y]+10000000000000') "Prize_Y"
    any8 = any15.set (expr '([B_X]*[Prize_Y]-[B_Y]*[Prize_X])/(([A_Y]*[B_X])-[A_X]*[B_Y])') "A_Presses"
    any9 = any8.set (expr '([A_X]*[Prize_Y]-[A_Y]*[Prize_X])/(([B_Y]*[A_X])-[B_X]*[A_Y])') "B_Presses"
    ## Get all of the winning machine and button press combinations
    any10 = any9.filter (expr '[A_Presses]=Floor([A_Presses]) && [B_Presses]=Floor([B_Presses])') ..Is_True ..Ignore
    ## Calculate the cost of the wins
    any11 = any10.set (expr '[A_Presses]*3+[B_Presses]') "Cost"
    ## Calculate the total cost of winning on all the machines
    any13 = any11.aggregate columns=[..Sum 'Cost']



#### METADATA ####
[[{"index":{"value":270},"size":{"value":61}},"fcf199e6-d2b1-44b7-be92-a47545d6a593"],[{"index":{"value":343},"size":{"value":20}},"5b86bd6b-4c8d-48a2-9963-48cc5af494a4"],[{"index":{"value":343},"size":{"value":160}},"5a0ae9a2-d021-4039-b752-95b2c98fad6d"],[{"index":{"value":516},"size":{"value":11}},"e66477c9-651b-4f3b-ab05-f1e66af11aee"],[{"index":{"value":542},"size":{"value":15}},"36e488bb-7631-456c-a61f-08ccf480d7e7"],[{"index":{"value":542},"size":{"value":27}},"405f2cbe-fd94-4f7a-80f3-da92a97f0990"],[{"index":{"value":584},"size":{"value":27}},"dbd6d641-9b47-452e-a386-c013468a86db"],[{"index":{"value":625},"size":{"value":19}},"019652a4-3331-45ce-aa2a-4c015452ab4f"],[{"index":{"value":625},"size":{"value":29}},"93ccc7fc-c8e5-4279-8c7f-c94006c2b42f"],[{"index":{"value":682},"size":{"value":17}},"b765b3fb-9bb0-4bd2-9456-f3ab12289948"],[{"index":{"value":682},"size":{"value":25}},"a9ac70b0-b88d-49bf-9250-2e0d01a4b761"],[{"index":{"value":682},"size":{"value":33}},"bb22b089-384a-4e9f-bc70-6e166788f1a7"],[{"index":{"value":729},"size":{"value":33}},"e0fb8933-066b-4485-9491-5accd86f10c1"],[{"index":{"value":774},"size":{"value":10}},"4146b624-0ba1-4227-8e41-70fa21d6b384"],[{"index":{"value":774},"size":{"value":57}},"f2219831-51bd-4e1c-9306-9f992a41e045"],[{"index":{"value":774},"size":{"value":61}},"701a0918-8086-4e76-b33b-9c636c3e4c48"],[{"index":{"value":847},"size":{"value":59}},"ff40d4f3-caa6-466b-aef8-3e6a24b1826a"],[{"index":{"value":986},"size":{"value":11}},"4cdfafd4-b1e2-4a46-91ee-c7b8ba251d27"],[{"index":{"value":986},"size":{"value":51}},"86f7dcfe-7199-4463-b1ff-3249d3f03272"],[{"index":{"value":986},"size":{"value":61}},"03525848-7e8a-4236-81e5-46d88c433732"],[{"index":{"value":1097},"size":{"value":8}},"4cebe790-fab1-468e-bc01-96e3a8233756"],[{"index":{"value":1097},"size":{"value":43}},"e3e31c36-1c7a-4bd2-b1bd-20f2cc49084f"],[{"index":{"value":1097},"size":{"value":50}},"e453a0e6-ebd5-4e8c-af4d-030bf4a0e87e"],[{"index":{"value":1209},"size":{"value":14}},"a77cd087-9278-4c57-8730-84de34c04aba"],[{"index":{"value":1209},"size":{"value":26}},"4867c05b-6a1b-4e85-8e55-03de40e43731"],[{"index":{"value":1209},"size":{"value":45}},"cb839b64-6620-40aa-834c-f856a7570e5f"],[{"index":{"value":1329},"size":{"value":14}},"9f4e4274-95e2-49cf-add0-7a61f2bab842"],[{"index":{"value":1329},"size":{"value":45}},"e2dabed9-67fc-43c0-9d87-e2e219ac90f4"],[{"index":{"value":1440},"size":{"value":10}},"05029dae-7d24-417b-ac02-feef471f5cc9"],[{"index":{"value":1440},"size":{"value":44}},"46f4f3b0-4bcb-4544-b1e8-8c694b4c25ff"],[{"index":{"value":1440},"size":{"value":54}},"b3954425-c469-414d-ac9f-1c6e761caeaf"],[{"index":{"value":1507},"size":{"value":53}},"d411f763-8a96-491d-a890-f8a3c57f3057"],[{"index":{"value":1572},"size":{"value":9}},"f619e1b3-65c3-4ed6-ae9d-f9155609303d"],[{"index":{"value":1572},"size":{"value":80}},"ba245f91-bd88-4fd5-ab8a-4f41f1e04a13"],[{"index":{"value":1572},"size":{"value":92}},"84d5cda2-2cb6-4799-bd12-024767cee4d1"],[{"index":{"value":1676},"size":{"value":91}},"077db97b-6562-4838-90a9-9cb7941d0b72"],[{"index":{"value":1848},"size":{"value":95}},"7e58b29f-3578-468e-956a-694447ad3856"],[{"index":{"value":1848},"size":{"value":104}},"23dea07d-c748-4750-9ca6-04578593789e"],[{"index":{"value":2003},"size":{"value":51}},"0929f12b-9620-47f7-b5a4-38ffc817b53a"],[{"index":{"value":2130},"size":{"value":38}},"a1db15c1-3e72-4b86-b73c-eb31cc2ffca1"]]
{"ide":{"node":{"fcf199e6-d2b1-44b7-be92-a47545d6a593":{"position":{"vector":[-953,743]},"visualization":{"show":false,"width":1027.671875,"height":386.9453125}},"5a0ae9a2-d021-4039-b752-95b2c98fad6d":{"position":{"vector":[-953,671]},"visualization":{"show":false,"width":1012.86328125,"height":218.54296875}},"5b86bd6b-4c8d-48a2-9963-48cc5af494a4":{"position":{"vector":[-429,284]}},"e66477c9-651b-4f3b-ab05-f1e66af11aee":{"position":{"vector":[-846,527]}},"405f2cbe-fd94-4f7a-80f3-da92a97f0990":{"position":{"vector":[-846,455]}},"36e488bb-7631-456c-a61f-08ccf480d7e7":{"position":{"vector":[-76,308]}},"dbd6d641-9b47-452e-a386-c013468a86db":{"position":{"vector":[-791,315]}},"93ccc7fc-c8e5-4279-8c7f-c94006c2b42f":{"position":{"vector":[-953,599]},"visualization":{"show":false,"width":1012.84765625}},"019652a4-3331-45ce-aa2a-4c015452ab4f":{"position":{"vector":[-889,374]}},"bb22b089-384a-4e9f-bc70-6e166788f1a7":{"position":{"vector":[-953,383]}},"a9ac70b0-b88d-49bf-9250-2e0d01a4b761":{"position":{"vector":[-928,227]}},"b765b3fb-9bb0-4bd2-9456-f3ab12289948":{"position":{"vector":[-928,227]}},"e0fb8933-066b-4485-9491-5accd86f10c1":{"position":{"vector":[-953,243]},"visualization":{"show":false,"width":1110.55078125,"height":302.46484375}},"701a0918-8086-4e76-b33b-9c636c3e4c48":{"position":{"vector":[-953,171]}},"f2219831-51bd-4e1c-9306-9f992a41e045":{"position":{"vector":[-953,25]}},"4146b624-0ba1-4227-8e41-70fa21d6b384":{"position":{"vector":[-953,25]}},"ff40d4f3-caa6-466b-aef8-3e6a24b1826a":{"position":{"vector":[-953,99]}},"03525848-7e8a-4236-81e5-46d88c433732":{"position":{"vector":[-953,1]},"visualization":{"show":false,"width":1533.6796875,"height":166.3828125}},"86f7dcfe-7199-4463-b1ff-3249d3f03272":{"position":{"vector":[-953,-191]}},"4cdfafd4-b1e2-4a46-91ee-c7b8ba251d27":{"position":{"vector":[-953,-191]}},"e453a0e6-ebd5-4e8c-af4d-030bf4a0e87e":{"position":{"vector":[-953,-71]}},"e3e31c36-1c7a-4bd2-b1bd-20f2cc49084f":{"position":{"vector":[-953,-263]}},"4cebe790-fab1-468e-bc01-96e3a8233756":{"position":{"vector":[-953,-263]}},"cb839b64-6620-40aa-834c-f856a7570e5f":{"position":{"vector":[-953,-143]}},"4867c05b-6a1b-4e85-8e55-03de40e43731":{"position":{"vector":[-953,-117]}},"a77cd087-9278-4c57-8730-84de34c04aba":{"position":{"vector":[-953,-117]}},"e2dabed9-67fc-43c0-9d87-e2e219ac90f4":{"position":{"vector":[-953,-215]}},"9f4e4274-95e2-49cf-add0-7a61f2bab842":{"position":{"vector":[-953,-189]}},"b3954425-c469-414d-ac9f-1c6e761caeaf":{"position":{"vector":[-434,365]},"visualization":{"show":false,"width":1322.34375}},"46f4f3b0-4bcb-4544-b1e8-8c694b4c25ff":{"position":{"vector":[-221,501]},"visualization":{"show":true}},"05029dae-7d24-417b-ac02-feef471f5cc9":{"position":{"vector":[-207,474]},"visualization":{"show":true}},"d411f763-8a96-491d-a890-f8a3c57f3057":{"position":{"vector":[-434,293]}},"84d5cda2-2cb6-4799-bd12-024767cee4d1":{"position":{"vector":[-434,171]},"visualization":{"show":false,"width":1558.296875,"height":398.17578125}},"ba245f91-bd88-4fd5-ab8a-4f41f1e04a13":{"position":{"vector":[-355,319]},"visualization":{"show":true,"width":1558.296875,"height":398.17578125}},"f619e1b3-65c3-4ed6-ae9d-f9155609303d":{"position":{"vector":[-329,315]}},"077db97b-6562-4838-90a9-9cb7941d0b72":{"position":{"vector":[-434,99]},"visualization":{"show":false,"width":1558.296875,"height":398.17578125}},"23dea07d-c748-4750-9ca6-04578593789e":{"position":{"vector":[-434,1]},"visualization":{"show":false,"width":1533.6796875,"height":166.3828125}},"7e58b29f-3578-468e-956a-694447ad3856":{"position":{"vector":[-293,145]},"visualization":{"show":false,"width":1533.6796875,"height":166.3828125}},"0929f12b-9620-47f7-b5a4-38ffc817b53a":{"position":{"vector":[-434,-71]}},"a1db15c1-3e72-4b86-b73c-eb31cc2ffca1":{"position":{"vector":[-434,-215]}}},"widget":{},"import":{},"snapshot":"eJytVF1v2jAUfe+vuKJSScowhNKurcqmhHbVHrpVotuIKIoMMeAtsSPbUaG/frLjhK+20j54Ctcn59xzc49ngqcwUJjFWMQowJIATTMuFOAkOZhtnT7gSfLG8TVWePImgf9j8PrhLefzhER+Rl/HDBh/miX415aGfaxAN0ucZgmRewffqcxxQp+xopwdHKSYMugdAADMaEI86IG2gATBMdRb3yQRsoVjQROyavV5TFr+136z0+50mzdM8tY1XnknLcqyXCG1VHXDhNlKExlClGEhSaR4pMzkHEHmZAm1IFeKM/AvYfjYcD5e+dHww2PccN9BaP+H5v8js8igRAY7yKBC3gv6TC5h2HM+XpnnNXJdKsE11/TKeGxct1GeRYqD126b+pQnecr0iUEgxaOiBDU/uhdESiJrG8jOS8hgG2kmcAI9MyCE4zgS/ClieTohAmp3eLqgjBTQw0O4x0KBt35R91IwoKngUkY/OWVVn1+4WlA2X8M7Jdzbh3e24JitKnAHSaLAIctMQH3kR8Px8ajyO4YGjAJTq5yN6y7UhrWSyLrbpQlfoAn3aMLK+y0xaw18BmpB4IkyRtkc0mJEgFkMk2ItMv0+THk6oczstCxb6RatnKAZTRQRVTfDcW9kt2MMR0cwCqtCqNtA6LOMHkROymb6OJnmCVbE9DLlUm30VcmdFnLdHeelv+OTxo7bPpeqMqwdKZ1pI7EgOCNSaX6YcQEETxel+VLvrNA7RXg+F2Su2xvV7Q7VxzBC6I4ymuYp1LVSffyyHcUVTipT5aA5M+PXACtb+Xxf6J5t6BZLJXsjhAZarxTe1jX73AGnz/MkhlwW+hKnBFKiFjw2Voutd6t7pLve+s3Blh+w4bU3f3qu9qhaSc9+Ga/7AkP4OkNYMZxbgtNNAscmoeRp2pUuO3NbjmM3XwPdpk2TRrlaZecawWx1Ueicb8v4OzL+vkxgA2ZkAhtaK7NzB/2ncHntoteL3XStN773KeFcOBsV18Qt2EOsK+5m/vTTnHHxh0H0PPu52n8XxX/Mh1de8N4bCbHJ+A1hgbBG"}}